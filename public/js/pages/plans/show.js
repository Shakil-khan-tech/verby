!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=39)}({39:function(e,t,n){e.exports=n("G3a5")},G3a5:function(e,t){var n,o,a,r,i,l,s,c,d=(o=$("#planForm"),a=$("#planFormSubmitAjax"),r=$(".footerSymbol"),i=$(".inputSymbol"),l=o.serialize(),s=function(){KTApp.block("#tablePlans",{overlayColor:"#000000",state:"danger",message:Lang.get("script.please_wait")});var e=performance.now();$.each(i,(function(){var e=$(this);e.hasClass("out_of_entry")&&(e.tooltip({title:Lang.get("script.out_of_entry"),html:!0}),e.parent("div").prepend('<div class="symbol absolute"><i class="bg-danger symbol-badge symbol-badge-top-middle"></i></div>'))}));var t=performance.now();console.log("Adding tooltips to out of entry symbols took ".concat(t-e," milliseconds")),KTApp.unblock("#tablePlans")},c=function(e){return!!/^([2][0-3]|[0-1]?[0-9])([:][0-5][0-9])?([-]([2][0-3]|[0-1]?[0-9])?([:][0-5][0-9])?)?$/.test(e)},{init:function(){"undefined"!=typeof KTLayoutStickyCard&&window.outerWidth>768&&KTLayoutStickyCard.init("planCard"),KTApp.block("#tablePlans",{overlayColor:"#000000",state:"danger",message:Lang.get("script.please_wait")}),$.ajax({url:"/plans/"+deviceId+"/records",type:"POST",cache:!1,datatype:"JSON",data:{date:calendarDate,inactive:inactiveEmployees},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,t,n,o){var a=performance.now();$.each(i,(function(){var t=$(this),n=t.parent("div").find("input[name*='dita']").val();if(!moment(moment().format("YYYY-MM-DD HH:mm:ss")).isBefore(n)){var o=t.parent("div").find("input[name*='employee_id']").val();!e.filter((function(e){return e.employee_id==o&&e.date==n})).length>0?c(t.val())&&(t.tooltip({title:Lang.get("script.notin_record_list"),html:!0}),t.parent("div").prepend('<div class="symbol absolute"><i class="bg-warning symbol-badge symbol-badge-top-middle"></i></div>')):""==t.val()&&(t.tooltip({title:Lang.get("script.added_as_vol"),html:!0}),t.val("V").change(),t.parent("div").prepend('<div class="symbol absolute"><i class="bg-success symbol-badge symbol-badge-top-middle"></i></div>'))}}));var r=performance.now();console.log("Checking and modifing symbols took ".concat(r-a," milliseconds")),KTApp.unblock("#tablePlans"),s()},error:function(e){var t="<b>"+String(e.responseJSON.message)+"</b><br>";for(var n in e.responseJSON.errors)e.responseJSON.errors.hasOwnProperty(n)&&(t+=e.responseJSON.errors[n]+"<br>");console.log(t),KTApp.unblock("#tablePlans")}}),a.on("click",(function(e){e.preventDefault(),n.validate().then((function(e){if("Valid"===e)KTApp.block("#tablePlans",{}),$.ajax({type:"PATCH",url:o.attr("action"),data:o.serialize(),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,t,n){KTApp.unblock("#tablePlans"),l=o.serialize();var a={};a.title=Lang.get("script.form_saved"),a.message="",$.notify(a,{type:"success",mouse_over:!0,z_index:1051})},error:function(e){KTApp.unblock("#tablePlans"),console.log(e)}});else{var t={};t.title=Lang.get("script.invalid_form"),t.message=Lang.get("script.check_fileds_icon"),$.notify(t,{type:"danger",mouse_over:!0,z_index:1051})}}))})),r.on("click",(function(){var e=$(this).data("symbol"),t=$("input.current");t.prop("readonly")||(t.val(e),t.parent("div").removeClass(),t.parent("div").addClass(constants.plan_colors[e].color),console.log(t)),t.parents("td").next("td").find("input.inputSymbol").focus()})),i.on("focus",(function(e){inputSymbol=$(this),$(this).select(),i.removeClass("current"),inputSymbol.addClass("current")})),i.on("change keydown paste",(function(e){inputSymbol=$(this),void 0!==constants.plan_colors[inputSymbol.val()]?inputSymbol.parent("div").addClass(constants.plan_colors[inputSymbol.val()].color):inputSymbol.parent("div").removeClass(),"Backspace"===e.key&&""==inputSymbol.val()&&inputSymbol.parents("td").prev("td").find("input.inputSymbol").focus()})),$(window).bind("beforeunload",(function(e){var t=o.serialize();if(l!=t){var n=Lang.get("script.unsaved_changes");return e.returnValue=n,n}})),n=FormValidation.formValidation(document.getElementById("planForm"),{fields:{digits:{selector:".inputSymbol",validators:{callback:{message:Lang.get("script.wrong_answer"),callback:function(e){return""===e.value||!!Object.keys(constants.plan_colors).includes(e.value.toUpperCase())||!!/^([2][0-3]|[0-1]?[0-9])([:][0-5][0-9])?([-]([2][0-3]|[0-1]?[0-9])?([:][0-5][0-9])?)?$/.test(e.value)}}}}},plugins:{trigger:new FormValidation.plugins.Trigger,icon:new FormValidation.plugins.Icon({invalid:"fa fa-times text-danger",validating:"fa fa-refresh"})}}),window.addEventListener("scroll",(function(e){$("body").hasClass("card-sticky-on")&&$(".table-sticky thead").css({top:"".concat(+window.scrollY+20,"px")})}))}});jQuery(document).ready((function(){d.init()}))}});