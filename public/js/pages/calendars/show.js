!function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=13)}({13:function(e,t,a){e.exports=a("EUua")},EUua:function(e,t){var a,o,n,r,s,c,l,i,d,p,u,m,f,g,v,h,y,b,_,x,T,k=(c=$("#tableCalendar"),l=$("#modalRoomsDepa"),i=$("#modalRoomsRestant"),d=$('select[name="modalExtraDepa"]'),p=$('select[name="modalExtraRestant"]'),u=$("#btnModalAddDepa"),m=$("#btnModalAddRestant"),f=$("#generatedRoomsDepa_remove"),g=$("#generatedRoomsRestant_remove"),v=$("#calendarDay"),h=$("#modalForm"),y=$("#btnModalGo"),b=$("#calendar_room_depa_search"),_=$("#calendar_room_restant_search"),x=$(".plan_data"),T=function(){KTApp.block(c,{overlayColor:"#000000",state:"danger",message:"Please wait..."}),$("body").tooltip({selector:".tooltiped"}),c.find("td").removeClass("bg-success"),$.ajax({url:"/calendars/"+deviceId+"/load",type:"POST",cache:!1,datatype:"JSON",data:{date:calendarDate},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,t,a,o){c.find("td.plan_data a").addClass("empty").html(0),e.forEach((function(e){e.calendars.forEach((function(e){var t=0,a=0;e.rooms.forEach((function(e,o){0==e.pivot.clean_type?t++:1==e.pivot.clean_type&&a++}));var o=$('td[data-date="'+e.date+'"][data-employee="'+e.employee_id+'"][data-type="0"]'),n=$('td[data-date="'+e.date+'"][data-employee="'+e.employee_id+'"][data-type="1"]');t>0&&(o.addClass("bg-success"),o.find("a").removeClass("empty")),a>0&&(n.addClass("bg-success"),n.find("a").removeClass("empty")),o.find("a").html(t),n.find("a").html(a)}))})),KTApp.unblock(c)},error:function(e){var t="<b>"+String(e.responseJSON.message)+"</b><br>";for(var a in e.responseJSON.errors)e.responseJSON.errors.hasOwnProperty(a)&&(t+=e.responseJSON.errors[a]+"<br>");console.log(t),KTApp.unblock(c)}})},{init:function(){T(),v.on("show.bs.modal",(function(e){setTimeout((function(){KTApp.block(h,{overlayColor:"#000000",state:"danger",message:"Please wait..."})}),300),a.removeAllTags(),o.removeAllTags();var t=$(this),c=$(e.relatedTarget).parent("td");n=c.data("date"),r=c.data("employee"),s=c.data("type"),$.ajax({url:"/calendars/"+deviceId+"/loadSingleDay",type:"GET",cache:!1,datatype:"JSON",data:{date:n,employee:r},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,r,c,d){0==s?$("#navi_depa").trigger("click").change():$("#navi_restant").trigger("click").change(),t.find("#modalCleanType").html(constants.clean_types[s]),t.find("#modalEmployee").html(e.employee.fullname),t.find("#modalDate").html(n),e.calendar.forEach((function(e){e.rooms.filter((function(e){return 0==e.pivot.clean_type})).forEach((function(e){a.addTags([{value:e.name,room_id:e.id,extra:e.pivot.extra,color:e.pivot.extra}])})),e.rooms.filter((function(e){return 1==e.pivot.clean_type})).forEach((function(e){o.addTags([{value:e.name,room_id:e.id,extra:e.pivot.extra,color:e.pivot.extra}])}))}));var p="";l.empty(),i.empty(),$.each(e.rooms,(function(e,t){p+="<label>"+constants.room_categories[e]+"</label>",p+='<div class="checkbox-inline">',$.each(t,(function(e,t){var a="";if(t.calendars.length){a="text-gray-400";var o=[];t.calendars.forEach((function(e){o.push(e.employee.fullname)})),p+='<label class="checkbox tooltiped" data-toggle="tooltip" data-html="true" title="'.concat(Lang.get("script.room_assigned"),": <strong>").concat(o.join(", "),'</strong>." >')}else p+='<label class="checkbox">';p+='<input type="checkbox" name="'+t.id+'" data-text="'+t.name+'" />',p+='<span></span><div class="'+a+'">'+t.name+"</div>",p+="</label>"})),p+="</div>"})),l.append(p),i.append(p),setTimeout((function(){e.calendar.forEach((function(e){e.rooms.filter((function(e){return 0==e.pivot.clean_type})).forEach((function(e){console.log($('#modalRoomsDepa input[name="'.concat(e.id,'"]')))})),e.rooms.filter((function(e){return 1==e.pivot.clean_type})).forEach((function(e){}))}))}),2e3),setTimeout((function(){KTApp.unblock(h)}),300)},error:function(e){var t="<b>"+String(e.responseJSON.message)+"</b><br>";for(var a in e.responseJSON.errors)e.responseJSON.errors.hasOwnProperty(a)&&(t+=e.responseJSON.errors[a]+"<br>");console.log(t),KTApp.unblock(h)}})})),v.on("hide.bs.modal",(function(e){var t=$(this);t.find("#modalEmployee").html(Lang.get("script.loading")),t.find("#modalDate").html(Lang.get("script.loading")),b.val("").trigger("change"),_.val("").trigger("change")})),function(){function e(e){e.class="tagify__tag tagify__tag-light--"+constants.colors[e.color]}a=new Tagify(document.querySelector("#generatedRoomsDepa"),{delimiters:null,editTags:!1,transformTag:e}),o=new Tagify(document.querySelector("#generatedRoomsRestant"),{delimiters:null,editTags:!1,transformTag:e}),a.on("add",(function(e){var t=i.find('input[name="'.concat(e.detail.data.room_id,'"]')),a=t.parent(".checkbox"),o={html:!0,title:"".concat(Lang.get("script.room_assigned"),": <strong>Depa</strong>")};a.tooltip(o),a.addClass("text-muted"),t.prop("disabled",!0)})).on("remove",(function(e){var t=i.find('input[name="'.concat(e.detail.data.room_id,'"]')),a=t.parent(".checkbox");a.tooltip("dispose"),a.removeClass("text-muted"),t.prop("disabled",!1)})).on("click",(function(e){})),o.on("add",(function(e){var t=l.find('input[name="'.concat(e.detail.data.room_id,'"]')),a=t.parent(".checkbox"),o={html:!0,title:"".concat(Lang.get("script.room_assigned"),": <strong>Restant</strong>")};a.tooltip(o),a.addClass("text-muted"),t.prop("disabled",!0)})).on("remove",(function(e){var t=l.find('input[name="'.concat(e.detail.data.room_id,'"]')),a=t.parent(".checkbox");a.tooltip("dispose"),a.removeClass("text-muted"),t.prop("disabled",!1)})).on("click",(function(e){})),f.on("click",(function(){confirm(Lang.get("script.are_you_sure"))&&a.removeAllTags()})),g.on("click",(function(){confirm(Lang.get("script.are_you_sure"))&&o.removeAllTags()}))}(),u.on("click",(function(e){l.find("input:checked").each((function(){var e=$(this);e.prop("checked",!1),a.addTags([{value:e.data("text"),room_id:e.attr("name"),extra:d.val(),color:d.val()}])}))})),m.on("click",(function(e){i.find("input:checked").each((function(){var e=$(this);e.prop("checked",!1),o.addTags([{value:e.data("text"),room_id:e.attr("name"),extra:p.val(),color:p.val()}])}))})),y.on("click",(function(e){e.preventDefault(),KTApp.block(h,{overlayColor:"#000000",state:"danger",message:"Please wait..."}),$.ajax({type:"PATCH",url:h.attr("action"),data:{date:n,employee:r,rooms_depa:a.DOM.originalInput.value,rooms_restant:o.DOM.originalInput.value},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,t,a){KTApp.unblock(h),v.modal("toggle"),T()},error:function(e){KTApp.unblock(h);var t="";for(var t in e.responseJSON.errors)e.responseJSON.errors.hasOwnProperty(t)&&(t+=e.responseJSON.errors[t]+"<br>");var a={};a.title=String(e.responseJSON.message),a.message=t,$.notify(a,{type:"danger",mouse_over:!0,z_index:1051})}})})),b.on("input",(function(e){var t=$(this).val();$.each(l.find("input"),(function(e,a){$(a).data("text").toString().toUpperCase().match(t.toUpperCase())?$(a).parent("label").removeClass("hidden"):$(a).parent("label").addClass("hidden")}))})),_.on("input",(function(e){var t=$(this).val();$.each(i.find("input"),(function(e,a){$(a).data("text").toString().toUpperCase().match(t.toUpperCase())?$(a).parent("label").removeClass("hidden"):$(a).parent("label").addClass("hidden")}))})),function(){KTApp.block(c,{overlayColor:"#000000",state:"danger",message:Lang.get("script.please_wait")});var e=performance.now();$.each(x,(function(){var e=$(this);e.hasClass("out_of_entry")&&e.tooltip({title:Lang.get("script.out_of_entry"),html:!0})}));var t=performance.now();console.log("Adding tooltips to out of entry symbols took ".concat(t-e," milliseconds")),console.log("Adding tooltips to out of entry symbols took ".concat((t-e)/1e3," seconds")),KTApp.unblock(c)}()}});jQuery(document).ready((function(){k.init()}))}});