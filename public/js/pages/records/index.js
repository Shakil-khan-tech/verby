!function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=45)}({45:function(t,e,n){t.exports=n("A48N")},A48N:function(t,e,n){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r,o,i,c=(i=$("#selectEmployee"),{init:function(){var t;$("body").tooltip({selector:".tooltiped"}),r=$("#records_datatable").KTDatatable({data:{type:"remote",source:{read:{url:records_json_url,headers:{"X-CSRF-TOKEN":$("meta[name=csrf-token]").attr("content")},map:function(t){var e=t;return void 0!==t.data&&(e=t.data),o=e,e}}},pageSize:10,serverPaging:!0,serverFiltering:!0,serverSorting:!0},layout:{scroll:!1,footer:!1},sortable:!0,pagination:!0,search:{input:$("#records_datatable_search_query"),key:"generalSearch"},columns:[{field:"id",title:"#",width:40,type:"number",selector:!1,textAlign:"center",autoHide:!1,visible:!1},{field:"employee_id",title:Lang.get("script.Employee"),autoHide:!1,template:function(t){var e=["success","info","primary","warning","danger"],n=void 0===e[t.employee.function]?e[4]:e[t.employee.function],a=0==t.employee.function?Lang.get("script.Manager"):Lang.get("script.Employee");return'<div class="d-flex align-items-center">\n                    <div class="symbol symbol-40 symbol-'.concat(n,' flex-shrink-0">\n                      <div class="symbol-label">').concat(t.employee.id,'</div>\n                    </div>\n                    <div class="ml-2">\n                      <a href="/').concat(Lang.locale,"/records/").concat(t.id,'">\n                        <div class="text-dark-75 font-weight-bold line-height-sm">').concat(t.employee.name," ").concat(t.employee.surname,'</div>\n                        <span class="font-size-sm text-dark-50 text-hover-primary">').concat(a,"<span>\n                      </a>\n                    </div>\n                  </div>")}},{field:"device_id",title:Lang.get("script.device"),template:function(t){return'<a href="/'.concat(Lang.locale,"/devices/").concat(t.device.id,'">').concat(t.device.name,"</a>")}},{field:"action",title:Lang.get("script.action"),template:function(t){return constants.actions[t.action]}},{field:"perform",title:Lang.get("script.perform"),template:function(t){return constants.performs[t.perform]}},{field:"rooms",title:Lang.get("script.rooms"),sortable:!1,overflow:"visible",textAlign:"left",template:function(t){return $.isEmptyObject(t.rooms)?"-":'\n                    <button data-record-id="'.concat(t.id,'" class="btn btn-sm btn-clean" title="').concat(Lang.get("script.view_records"),'">\n                      <i class="flaticon2-document"></i> ').concat(Lang.get("script.details"),"\n                    </button>")}},{field:"identity",title:Lang.get("script.identity"),template:function(t){return 3==t.identity&&null!=t.user?'\n                    <div class="tooltiped" data-toggle="tooltip" data-html="true"\n                      title="'.concat(Lang.get("script.edited_by_name",{name:t.user.name})," <br> ").concat(Lang.get("script.edited_on_date",{date:moment(t.updated_at).format("DD.MM.YYYY HH:mm:ss")}),'"\n                    >\n                      <span>').concat(constants.identities[t.identity],'</span>\n                      <span class="svg-icon svg-icon unprint inline-block">\n                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">\n                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                            <rect x="0" y="0" width="24" height="24"></rect>\n                            <circle fill="#000000" cx="9" cy="15" r="6"></circle>\n                            <path\n                              d="M8.8012943,7.00241953 C9.83837775,5.20768121 11.7781543,4 14,4 C17.3137085,4 20,6.6862915 20,10 C20,12.2218457 18.7923188,14.1616223 16.9975805,15.1987057 C16.9991904,15.1326658 17,15.0664274 17,15 C17,10.581722 13.418278,7 9,7 C8.93357256,7 8.86733422,7.00080962 8.8012943,7.00241953 Z"\n                              fill="#000000" opacity="0.3"></path>\n                          </g>\n                        </svg>\n                      </span>\n                    </div>\n                  '):constants.identities[t.identity]}},{field:"time",title:Lang.get("script.time"),sortable:"desc",template:function(t){return moment(t.time).format("DD.MM.YYYY HH:mm:ss")}},{field:"Actions",title:Lang.get("script.Actions"),sortable:!1,width:125,overflow:"visible",autoHide:!1,template:function(t){return'                      <a href="/'.concat(Lang.locale,"/records/").concat(t.id,'" class="btn btn-sm btn-clean btn-icon mr-2" title="').concat(Lang.get("script.edit_details"),'">                          <span class="svg-icon svg-icon-md">                              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">                                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                                      <rect x="0" y="0" width="24" height="24"/>                                      <path d="M8,17.9148182 L8,5.96685884 C8,5.56391781 8.16211443,5.17792052 8.44982609,4.89581508 L10.965708,2.42895648 C11.5426798,1.86322723 12.4640974,1.85620921 13.0496196,2.41308426 L15.5337377,4.77566479 C15.8314604,5.0588212 16,5.45170806 16,5.86258077 L16,17.9148182 C16,18.7432453 15.3284271,19.4148182 14.5,19.4148182 L9.5,19.4148182 C8.67157288,19.4148182 8,18.7432453 8,17.9148182 Z" fill="#000000" fill-rule="nonzero" transform="translate(12.000000, 10.707409) rotate(-135.000000) translate(-12.000000, -10.707409) "/>                                      <rect fill="#000000" opacity="0.3" x="5" y="20" width="15" height="2" rx="1"/>                                  </g>                              </svg>                          </span>                      </a>                      <a href="javascript:;" class="btnDeleteSingleRecord btn btn-sm btn-clean btn-icon" data-record_id="').concat(t.id,'" title="').concat(Lang.get("script.delete_record"),'">                          <span class="svg-icon svg-icon-md">                              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">                                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                                      <rect x="0" y="0" width="24" height="24"/>                                      <path d="M6,8 L6,20.5 C6,21.3284271 6.67157288,22 7.5,22 L16.5,22 C17.3284271,22 18,21.3284271 18,20.5 L18,8 L6,8 Z" fill="#000000" fill-rule="nonzero"/>                                      <path d="M14,4.5 L14,4 C14,3.44771525 13.5522847,3 13,3 L11,3 C10.4477153,3 10,3.44771525 10,4 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z" fill="#000000" opacity="0.3"/>                                  </g>                              </svg>                          </span>                      </a>                  ')}}],translate:TraceLocales.datatables()}),$("#records_datatable_search_device").on("change",(function(){r.search($(this).val().toLowerCase(),"device")})),$("#records_datatable_search_device").selectpicker(),$("#recordsDaterangepicker").daterangepicker({buttonClasses:" btn",applyClass:"btn-primary",cancelClass:"btn-secondary",timePicker:!0,timePickerIncrement:30,locale:{format:"MM/DD/YYYY h:mm A"},ranges:(t={},a(t,Lang.get("script.today"),[moment(),moment()]),a(t,Lang.get("script.yesterday"),[moment().subtract(1,"days"),moment().subtract(1,"days")]),a(t,Lang.get("script.last7days"),[moment().subtract(6,"days"),moment()]),a(t,Lang.get("script.last30days"),[moment().subtract(29,"days"),moment()]),a(t,Lang.get("script.this_month"),[moment().startOf("month"),moment().endOf("month")]),a(t,Lang.get("script.last_month"),[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]),t)},(function(t,e,n){$("#kt_daterangepicker_4 .form-control").val(t.format("MM/DD/YYYY h:mm A")+" / "+e.format("MM/DD/YYYY h:mm A")),r.search({start:t.format("YYYY-MM-DD HH:mm:00"),end:e.format("YYYY-MM-DD HH:mm:00")},"Date")})).on("cancel.daterangepicker",(function(t,e){$(this).val(""),r.search({start:null,end:null},"Date")})),$("#clearRecordsDaterangepicker").click((function(){$("#recordsDaterangepicker").val(""),r.search({start:null,end:null},"Date")})),r.on("click","[data-record-id]",(function(){$("#roomModal").modal("show",$(this))})),$("#roomModal").on("show.bs.modal",(function(t){var e=$(t.relatedTarget).data("record-id"),n=o.find((function(t){return t.id===e})).rooms,a=o.find((function(t){return t.id===e})).device.name;$("#roomsTitle").find("span").html(a);var r='<table class="table">\n          <thead>\n            <tr>\n              <th scope="col">#</th>\n              <th scope="col">\n                <span class="text-dark-75">'.concat(Lang.get("script.room_name"),'</span>\n              </th>\n              <th scope="col">').concat(Lang.get("script.room_category"),'</th>\n              <th scope="col">').concat(Lang.get("script.clean_type"),'</th>\n              <th scope="col">').concat(Lang.get("script.extra"),'</th>\n              <th scope="col">').concat(Lang.get("script.status"),'</th>\n              <th scope="col">').concat(Lang.get("script.volunteer"),"</th>\n            </tr>\n          </thead>\n          <tbody>\n        ");if($.isEmptyObject(n))r+='<tr><td class="py-1" colspan="5"></td></tr>';else{var i=0;$.each(n,(function(t,e){var n=e.pivot.volunteer?e.pivot.volunteer_name:"";r+="              <tr>                <td>"+(i+=1)+"</span></td>                <td>"+e.name+"</td>                <td>"+constants.room_categories[e.category]+'</td>                <td>                  <span class="label label-xl label-light-'+constants.colors[e.pivot.clean_type]+' label-pill label-inline">'+constants.clean_types[e.pivot.clean_type]+"</span>                </td>                <td>"+constants.calendar_room_extra[e.pivot.extra]+"</td>                <td>"+constants.room_statuses[e.pivot.status]+"</td>                <td>"+n+"</td>              </tr>            "}))}r+="          </tbody>        </table>        ",$(this).find(".rooms").html(r)})),$("#records_datatable").on("click",".btnDeleteSingleRecord",(function(t){if(t.stopPropagation(),confirm(Lang.get("script.are_you_sure"))){var e=$(this);e.addClass("spinner spinner-right spinner-white pr-15"),$.ajax({url:"/records/"+e.data("record_id"),type:"DELETE",cache:!1,datatype:"JSON",data:{id:e.data("record_id"),_method:"DELETE"},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t,e,n,a){r.reload()},error:function(t){e.removeClass("spinner spinner-right spinner-white pr-15");var n="<b>"+String(t.responseJSON.message)+"</b><br>";for(var a in t.responseJSON.errors)t.responseJSON.errors.hasOwnProperty(a)&&(n+=t.responseJSON.errors[a]+"<br>");console.log(n)}})}})),function(){var t=$("#record_employee_datatable").KTDatatable({data:{pageSize:10},pagination:!0,search:{input:$("#record_employee_datatable_search_query"),key:"generalSearch"},layout:{class:"datatable-bordered",scroll:!0,height:400,minHeight:400,footer:!1},columns:[{field:"Employee",title:Lang.get("script.Employee"),sortable:!0,autoHide:!1,overflow:"visible",textAlign:"left"},{field:"View",title:Lang.get("script.view"),sortable:!1,width:80,autoHide:!1,overflow:"visible",textAlign:"left"}],translate:TraceLocales.datatables()});$("#record_employee_datatable_search_status").on("change",(function(){t.search($(this).val().toLowerCase(),"Function")})),$("#record_employee_datatable_search_type").on("change",(function(){t.search($(this).val().toLowerCase(),"Type")})),$("#record_employee_datatable_search_status, #record_employee_datatable_search_type").selectpicker(),t.hide();var e=!1;i.on("show.bs.modal",(function(n){if(!e){var a=$(this).find(".modal-content");t.spinnerCallback(!0,a),t.reload(),t.on("datatable-on-layout-updated",(function(){t.show(),t.spinnerCallback(!1,a),t.redraw()})),e=!0}}))}()}});jQuery(document).ready((function(){c.init()}))}});