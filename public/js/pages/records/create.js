!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=44)}({44:function(e,t,n){e.exports=n("NYc7")},NYc7:function(e,t){var n,a,o,r,s,i,l,c,u,d,p,m,f,g,v,y,_,h,b,x=(n=tagify_restant=null,a=$("#device_input"),o=$("#employee_input"),r=$("#record_datetime"),s=$("#recordDepaRooms"),i=$("#recordRestantRooms"),l=$("#btnDepaAdd"),c=$("#btnRestantAdd"),u=$("#depaExtra"),d=$("#restantExtra"),p=$("#depaRooms_remove"),m=$("#depaRestant_remove"),f=$("#depaStatus"),g=$("#restantStatus"),v=$("#volunteers_depa_input"),y=$("#volunteers_restant_input"),$("#depaRooms"),$("#restantRooms"),_=moment(r.find("input").val()),h=function(){function e(e){e.class="tagify__tag tagify__tag-light--".concat(constants.colors[e.color]," status-").concat(e.status)}null===n&&null===tagify_restant||(n.removeAllTags(),tagify_restant.removeAllTags(),n.destroy(),tagify_restant.destroy()),n=new Tagify(document.querySelector("#depaRooms"),{delimiters:null,editTags:!1,transformTag:e}),tagify_restant=new Tagify(document.querySelector("#restantRooms"),{delimiters:null,editTags:!1,transformTag:e}),p.on("click",(function(){confirm(Lang.get("script.are_you_sure"))&&n.removeAllTags()})),m.on("click",(function(){confirm(Lang.get("script.are_you_sure"))&&tagify_restant.removeAllTags()})),$.ajax({url:"undefined"!=typeof current_record?"/records/rooms/".concat(current_record.id):"/records/rooms",type:"POST",cache:!1,datatype:"JSON",data:{date:_.format("YYYY-MM-DD"),calendar:!0,employee:o.find(":selected").val()},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,t,n,a){var o="",r="";s.empty(),i.empty(),console.log(e),$.each(e,(function(e,t){o+='<optgroup label="'+constants.room_categories[e]+'">',r+='<optgroup label="'+constants.room_categories[e]+'">',$.each(t,(function(e,t){0==t.pivot.clean_type?o+='<option value="'+t.id+'">'+t.name+"</option>":r+='<option value="'+t.id+'">'+t.name+"</option>"})),o+="</optgroup>",r+="</optgroup>"})),s.append(o),i.append(r),s.selectpicker("refresh"),i.selectpicker("refresh")},error:function(e){var t="<b>"+String(e.responseJSON.message)+"</b><br>";for(var n in e.responseJSON.errors)e.responseJSON.errors.hasOwnProperty(n)&&(t+=e.responseJSON.errors[n]+"<br>");console.log(t)}})},b=function(e){var t="".concat(Lang.get("script.status"),": ").concat(constants.room_statuses[e.status]);return e.volunteer&&3==e.status&&(t+="\n".concat(Lang.get("script.volunteer"),": ").concat(e.volunteer_name)),t},{init:function(){$("#device_input","#action_input","#perform_input","#identity_input").select2({placeholder:Lang.get("script.select_device")}),1==$("#action_input").find("option:selected").val()&&4!=a.find("option:selected").val()||($(".row_rooms").hide(),null===n&&null===tagify_restant||(n.removeAllTags(),tagify_restant.removeAllTags())),a.on("change",(function(e){1!=$("#action_input").find("option:selected").val()||4==a.find("option:selected").val()?($(".row_rooms").hide(),$("#perform_input").val(6).change(),null===n&&null===tagify_restant||(n.removeAllTags(),tagify_restant.removeAllTags())):($(".row_rooms").show(),h())})),$("#action_input").on("change",(function(e){4!=a.find("option:selected").val()&&(1!=$(this).find("option:selected").val()?($(".row_rooms").hide(),null===n&&null===tagify_restant||(n.removeAllTags(),tagify_restant.removeAllTags())):($(".row_rooms").show(),h()))})),l.on("click",(function(e){n.addTags([{value:s.find("option:selected").text(),room_id:s.val(),extra:u.val(),color:u.val(),status:f.val(),volunteer:v.find(":selected").val(),title:b({status:f.val(),volunteer:y.find(":selected").val(),volunteer_name:y.select2("data")[0]?y.select2("data")[0].fullname:""})}])})),c.on("click",(function(e){tagify_restant.addTags([{value:i.find("option:selected").text(),room_id:i.val(),extra:d.val(),color:d.val(),status:g.val(),volunteer:y.find(":selected").val(),title:b({status:g.val(),volunteer:y.find(":selected").val(),volunteer_name:y.select2("data")[0]?y.select2("data")[0].fullname:""})}])})),o.select2({placeholder:Lang.get("script.search_employees"),allowClear:!0,ajax:{url:"/records/employees",dataType:"json",delay:250,data:function(e){return{query:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:30*t.page<e.total_count}}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:0,templateResult:function(e){if(e.loading)return e.id;var t=["success","info","primary","warning","danger"],n=void 0===t[e.function]?t[4]:t[e.function],a=0==e.function?Lang.get("script.Manager"):Lang.get("script.Employee");return'<div class="d-flex align-items-center">\n            <div class="symbol symbol-40 symbol-'.concat(n,' flex-shrink-0">\n              <div class="symbol-label">').concat(e.fullname.substring(0,1),'</div>\n            </div>\n            <div class="ml-2">\n              <div class="text-dark-75 font-weight-bold line-height-sm">').concat(e.fullname,'</div>\n              <span class="font-size-sm text-dark-50 text-hover-primary">').concat(a,"</span>\n            </div>\n          </div>")},templateSelection:function(e){return e.fullname||e.text}}),o.trigger("change"),o.on("change",(function(e){"undefined"==typeof current_record&&h()})),r.datetimepicker({locale:Lang.locale,format:"DD.MM.YYYY HH:mm:ss",defaultDate:moment()}),_=r.data("datetimepicker").date(),r.on("change.datetimepicker",(function(e){_.format("L")===r.data("datetimepicker").date().format("L")?_=r.data("datetimepicker").date():(_=r.data("datetimepicker").date(),h())})),h(),"undefined"!=typeof currentEmployee&&$.ajax({url:"/records/employees",type:"POST",cache:!1,datatype:"JSON",data:{single_employee:currentEmployee},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).then((function(e){var t=new Option(e.fullname,e.id,!0,!0);o.append(t).trigger("change"),o.trigger({type:"select2:select",params:{data:e}})})),"undefined"!=typeof currentDepaRooms&&"undefined"!=typeof currentRestantRooms&&($.each(currentDepaRooms,(function(e,t){n.addTags([{value:t.name,room_id:t.id,clean_type:t.pivot.clean_type,extra:t.pivot.extra,status:t.pivot.status,color:t.pivot.extra,volunteer:t.pivot.volunteer,title:b(t.pivot)}])})),$.each(currentRestantRooms,(function(e,t){tagify_restant.addTags([{value:t.name,room_id:t.id,clean_type:t.pivot.clean_type,extra:t.pivot.extra,status:t.pivot.status,color:t.pivot.extra,volunteer:t.pivot.volunteer,title:b(t.pivot)}])}))),function(){function e(e){if(e.loading)return e.id;var t=["success","info","primary","warning","danger"],n=void 0===t[e.function]?t[4]:t[e.function],a=0==e.function?Lang.get("script.Manager"):Lang.get("script.Employee");return'<div class="d-flex align-items-center">            <div class="symbol symbol-40 symbol-'.concat(n,' flex-shrink-0">              <div class="symbol-label">').concat(e.fullname.substring(0,1),'</div>            </div>            <div class="ml-2">              <div class="text-dark-75 font-weight-bold line-height-sm">').concat(e.fullname,'</div>              <span class="font-size-sm text-dark-50 text-hover-primary">').concat(a,"</span>            </div>          </div>")}function t(e){return e.fullname||e.text}v.select2({placeholder:Lang.get("script.search_employees"),allowClear:!0,ajax:{url:"/records/employees",dataType:"json",delay:250,data:function(e){return{query:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:30*t.page<e.total_count}}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:0,templateResult:e,templateSelection:t}),y.select2({placeholder:Lang.get("script.search_employees"),allowClear:!0,ajax:{url:"/records/employees",dataType:"json",delay:250,data:function(e){return{query:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:30*t.page<e.total_count}}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:0,templateResult:e,templateSelection:t}),y.trigger("change")}()}});jQuery(document).ready((function(){x.init()}))}});