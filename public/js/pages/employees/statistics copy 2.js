!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=28)}({28:function(e,t,a){e.exports=a("WKth")},WKth:function(e,t,a){"use strict";var n,o,r,c,s,i,l=(r=moment().format("YYYY-MM"),c=$(".statDefinedMonths"),$("#date_picker_start"),$("#date_picker_end"),s=moment().format("YYYY-MM"),i=moment().format("YYYY-MM"),{init:function(){n=document.querySelector("#employee_datatable"),o=$(n).DataTable({responsive:!0,buttons:["print","copyHtml5","excelHtml5","csvHtml5","pdfHtml5"],processing:!0,serverSide:!0,ajax:{url:statistics_json_url,type:"POST",headers:{"X-CSRF-TOKEN":$("meta[name=csrf-token]").attr("content")},data:{columnsDef:["id","name","ORT","active_status","seconds","percentage","work_percetage","function"]},params:{query:{active_status:$("#employee_datatable_search_active").val()}}},columns:[{data:"id"},{data:"name"},{data:"ORT"},{data:"active_status"},{data:"seconds"},{data:"seconds"},{data:"work_percetage"},{data:"function"}],columnDefs:[{targets:1,render:function(e,t,a,n){var o=["success","info","primary","warning","danger"],c=void 0===o[a.function]?o[4]:o[a.function],s=0==a.function?Lang.get("script.Manager"):Lang.get("script.Employee");return'\n                        <div class="d-flex align-items-center">\n                            <div class="symbol symbol-40 symbol-'.concat(c,' flex-shrink-0">\n                                <div class="symbol-label">').concat(a.id,'</div>\n                            </div>\n                            <div class="ml-2">\n                                <a href="/').concat(Lang.locale,"/records/calendar/").concat(a.id,"/print?date=").concat(r,'">\n                                    <div class="text-dark-75 font-weight-bold line-height-sm">').concat(a.name," ").concat(a.surname,'</div>\n                                    <span class="font-size-sm text-dark-50 text-hover-primary">').concat(s,"</span>\n                                </a>\n                            </div>\n                        </div>\n                        ")}}],search:{input:$("#employee_datatable_search_query"),key:"generalSearch"},translate:TraceLocales.datatables()}),$("#employee_datatable_search_status").on("change",(function(){o.search($(this).val().toLowerCase(),"function")})),$("#employee_datatable_search_active").on("change",(function(){o.search($(this).val().toLowerCase(),"active_status")})),$("#employee_datatable_search_status, #employee_datatable_search_active").selectpicker(),o.on("datatable-on-click-checkbox",(function(e){})),o.on("datatable-on-ajax-error",(function(e,t,a,o){KTApp.unblock(n),console.log(t),console.log(a),console.log(o)})),c.on("click",(function(e){e.preventDefault(),c.removeClass("bg-gray-200 active"),$(this).addClass("bg-gray-200 active");var t=$(this).data("months")-1;s=moment().subtract(t,"months").format("YYYY-MM"),i=moment().format("YYYY-MM"),console.log(s),console.log(i),$("#dropdown-statistics-toggle").html("".concat(s," ").concat(Lang.get("script.to")," ").concat(i)),o.search({start:s,end:i},"Date")})),$("#datatable_send_email_bulk").on("click",(function(){console.log("send email");var e=o.checkbox().getSelectedId();$.ajax({type:"POST",url:"/".concat(Lang.locale,"/records/calendar_report/bulkemail"),data:{employees:e,date:r},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,t,a){console.log(e)},error:function(e){console.log(e)}})})),$(n).on("click",".btnSendEmailSingle",(function(e){e.stopPropagation(),KTApp.block(n,{overlayColor:"#000000",state:"danger",message:Lang.get("script.please_wait")});var t={};t.title=Lang.get("script.sending_email"),t.message=Lang.get("script.checking_emp_email");var a=$.notify(t,{type:"primary",mouse_over:!0,showProgressbar:!0,timer:10,z_index:1051}),o=$(this).data("record_id"),r=$(this).data("month");$.ajax({type:"POST",url:"/".concat(Lang.locale,"/records/calendar/").concat(o,"/email"),data:{date:r},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,t,o){KTApp.unblock(n),console.log(e),setTimeout((function(){a.update("message",e.success),a.update("type","success"),a.update("progress",100)}),5)},error:function(e){KTApp.unblock(n);var t="";for(var t in e.responseJSON.errors)e.responseJSON.errors.hasOwnProperty(t)&&(t+=e.responseJSON.errors[t]+"<br>");setTimeout((function(){a.update("message",String(e.responseJSON.message)),a.update("type","danger"),a.update("progress",60)}),500)}})}))}});jQuery(document).ready((function(){l.init()}))}});