!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=48)}({48:function(e,t,n){e.exports=n("ikfN")},ikfN:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a,i,s,o,l,c,d,u,m=(s=$("#addSupplyListingModal"),o=$("#addSupplyListingForm"),l=$("#btnModalGo"),c=$("#generate_pdf"),d=null,u=null,{init:function(){var e,t;$("#listing_device").select2({width:"100%"}),$("#listing_supply").select2({width:"100%"}),$("body").tooltip({selector:".tooltiped"}),a=$("#requested_supply_listing_datatable").KTDatatable({data:{type:"remote",source:{read:{url:listings_json_url+"?type=0",headers:{"X-CSRF-TOKEN":$("meta[name=csrf-token]").attr("content")},map:function(e){var t=e;return void 0!==e.data&&(t=e.data),t}}},pageSize:10,serverPaging:!0,serverFiltering:!0,serverSorting:!0},layout:{scroll:!1,footer:!1},sortable:!0,pagination:!0,search:{input:$("#requested_supply_listing_datatable_search_query"),key:"generalSearch"},rowGroup:{dataSrc:"room_id"},columns:[{field:"id",title:"#",width:40,type:"number",selector:!1,textAlign:"center",autoHide:!1},{field:"supply_id",title:Lang.get("script.Inventory"),class:"font-bold",template:function(e){return e.supply.name}},{field:"device_id",title:Lang.get("script.device"),template:function(e){return e.device.name}},{field:"date_requested",title:Lang.get("script.date_requested"),template:function(e){return moment(e.date_requested).format("DD.MM.YYYY HH:mm:ss")}},{field:"user_requested",title:Lang.get("script.user_requested"),template:function(e){return e.user_requested.name}},{field:"comment",class:"dt_comment italic",title:Lang.get("script.comment"),sortable:!1,template:function(e){return e.comment?'<div class="tooltiped" data-toggle="tooltip" data-html="true" title="'.concat(e.comment,'">\n                  ').concat(e.comment,"\n                </div>"):Lang.get("script.no_comment")}},{field:"Actions",title:Lang.get("script.Actions"),sortable:!1,width:125,overflow:"visible",autoHide:!1,template:function(e){return'\n                  <a href="javascript:;" class="btn btn-sm btn-light-primary" data-supply_id="'.concat(e.id,'">\n                    ').concat(Lang.get("script.fulfill_order"),"\n                  </a>\n                ")}}],translate:TraceLocales.datatables()}),$("#requested_supply_listing_datatable_search_device").on("change",(function(){a.search($(this).val().toLowerCase(),"device")})),$("#requested_supply_listing_datatable_search_device").selectpicker(),$("#requestedDaterangepicker").daterangepicker({buttonClasses:" btn",applyClass:"btn-primary",cancelClass:"btn-secondary",timePicker:!0,timePickerIncrement:30,locale:{format:"MM/DD/YYYY h:mm A"},ranges:(e={},r(e,Lang.get("script.today"),[moment(),moment()]),r(e,Lang.get("script.yesterday"),[moment().subtract(1,"days"),moment().subtract(1,"days")]),r(e,Lang.get("script.last7days"),[moment().subtract(6,"days"),moment()]),r(e,Lang.get("script.last30days"),[moment().subtract(29,"days"),moment()]),r(e,Lang.get("script.this_month"),[moment().startOf("month"),moment().endOf("month")]),r(e,Lang.get("script.last_month"),[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]),e)},(function(e,t,n){$("#kt_daterangepicker_4 .form-control").val(e.format("MM/DD/YYYY h:mm A")+" / "+t.format("MM/DD/YYYY h:mm A")),a.search({start:e.format("YYYY-MM-DD HH:mm:00"),end:t.format("YYYY-MM-DD HH:mm:00")},"Date"),d=e.format("MM/DD/YYYY"),u=t.format("MM/DD/YYYY")})).on("cancel.daterangepicker",(function(e,t){$(this).val(""),a.search({start:null,end:null},"Date"),d=null,u=null})),$("#clearRequestedDaterangepicker").click((function(){$("#requestedDaterangepicker").val(""),a.search({start:null,end:null},"Date"),d=null,u=null})),a.on("click","[data-supply_id]",(function(){var e=$(this);e.addClass("spinner spinner-right spinner-white pr-15"),$.ajax({url:"/supplies/listings/fix",type:"POST",cache:!1,datatype:"JSON",data:{listing:$(this).data("supply_id")},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,t,n,r){console.log(e),$(".current_requested_listings").html(e.total_requested),$(".current_fixed_listings").html(e.total_fixed),a.reload(),i.reload()},error:function(t){e.removeClass("spinner spinner-right spinner-white pr-15");var n="<b>"+String(t.responseJSON.message)+"</b><br>";for(var r in t.responseJSON.errors)t.responseJSON.errors.hasOwnProperty(r)&&(n+=t.responseJSON.errors[r]+"<br>");console.log(n)}})})),i=$("#fixed_supply_listing_datatable").KTDatatable({data:{type:"remote",source:{read:{url:listings_json_url+"?type=1",headers:{"X-CSRF-TOKEN":$("meta[name=csrf-token]").attr("content")},map:function(e){var t=e;return void 0!==e.data&&(t=e.data),t}}},pageSize:10,serverPaging:!0,serverFiltering:!0,serverSorting:!0},layout:{scroll:!1,footer:!1},sortable:!0,pagination:!0,search:{input:$("#fixed_supply_listing_datatable_search_query"),key:"generalSearch"},rowGroup:{dataSrc:"room_id"},columns:[{field:"id",title:"#",width:40,type:"number",selector:!1,textAlign:"center",autoHide:!1},{field:"supply_id",title:Lang.get("script.Inventory"),class:"font-bold",template:function(e){return e.supply.name}},{field:"device_id",title:Lang.get("script.device"),template:function(e){return e.device.name}},{field:"date_requested",title:Lang.get("script.date_requested"),template:function(e){return moment(e.date_requested).format("DD.MM.YYYY HH:mm:ss")}},{field:"date_fixed",title:Lang.get("script.date_fixed"),template:function(e){return moment(e.date_fixed).format("DD.MM.YYYY HH:mm:ss")}},{field:"user_requested",title:Lang.get("script.user_requested"),template:function(e){return e.user_requested.name}},{field:"user_fixed",title:Lang.get("script.user_fixed"),template:function(e){return e.user_fixed.name}},{field:"comment",class:"dt_comment",title:Lang.get("script.comment"),sortable:!1,template:function(e){return e.comment?'<div class="tooltiped" data-toggle="tooltip" data-html="true" title="'.concat(e.comment,'">\n                  ').concat(e.comment,"\n                </div>"):Lang.get("script.no_comment")}},{field:"Actions",title:Lang.get("script.Actions"),sortable:!1,width:125,overflow:"visible",autoHide:!1,template:function(e){return'                    <a href="javascript:;" class="btnDeleteSingleRecord btn btn-sm btn-clean btn-icon" data-record_id="'.concat(e.id,'" title="').concat(Lang.get("script.delete_inventory"),'">                        <span class="svg-icon svg-icon-md">                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                                    <rect x="0" y="0" width="24" height="24"/>                                    <path d="M6,8 L6,20.5 C6,21.3284271 6.67157288,22 7.5,22 L16.5,22 C17.3284271,22 18,21.3284271 18,20.5 L18,8 L6,8 Z" fill="#000000" fill-rule="nonzero"/>                                    <path d="M14,4.5 L14,4 C14,3.44771525 13.5522847,3 13,3 L11,3 C10.4477153,3 10,3.44771525 10,4 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z" fill="#000000" opacity="0.3"/>                                </g>                            </svg>                        </span>                    </a>                  ')}}],translate:TraceLocales.datatables()}),$("#fixed_supply_listing_datatable_search_device").on("change",(function(){i.search($(this).val().toLowerCase(),"device")})),$("#fixed_supply_listing_datatable_search_device").selectpicker(),$("#fixedDaterangepicker").daterangepicker({buttonClasses:" btn",applyClass:"btn-primary",cancelClass:"btn-secondary",timePicker:!0,timePickerIncrement:30,locale:{format:"MM/DD/YYYY h:mm A"},ranges:(t={},r(t,Lang.get("script.today"),[moment(),moment()]),r(t,Lang.get("script.yesterday"),[moment().subtract(1,"days"),moment().subtract(1,"days")]),r(t,Lang.get("script.last7days"),[moment().subtract(6,"days"),moment()]),r(t,Lang.get("script.last30days"),[moment().subtract(29,"days"),moment()]),r(t,Lang.get("script.this_month"),[moment().startOf("month"),moment().endOf("month")]),r(t,Lang.get("script.last_month"),[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]),t)},(function(e,t,n){$("#kt_daterangepicker_4 .form-control").val(e.format("MM/DD/YYYY h:mm A")+" / "+t.format("MM/DD/YYYY h:mm A")),i.search({start:e.format("YYYY-MM-DD HH:mm:00"),end:t.format("YYYY-MM-DD HH:mm:00")},"Date")})).on("cancel.daterangepicker",(function(e,t){$(this).val(""),i.search({start:null,end:null},"Date")})),$("#clearFixedDaterangepicker").click((function(){$("#fixedDaterangepicker").val(""),i.search({start:null,end:null},"Date")})),$("#fixed_supply_listing_datatable").on("click",".btnDeleteSingleRecord",(function(e){if(e.stopPropagation(),confirm(Lang.get("script.are_you_sure"))){var t=$(this);t.addClass("spinner spinner-right spinner-white pr-15"),$.ajax({url:"/supplies/listings/delete/"+t.data("record_id"),type:"DELETE",cache:!1,datatype:"JSON",data:{_method:"DELETE"},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,t,n,r){$(".current_requested_listings").html(e.total_requested),$(".current_fixed_listings").html(e.total_fixed),a.reload(),i.reload()},error:function(e){t.removeClass("spinner spinner-right spinner-white pr-15");var n="<b>"+String(e.responseJSON.message)+"</b><br>";for(var r in e.responseJSON.errors)e.responseJSON.errors.hasOwnProperty(r)&&(n+=e.responseJSON.errors[r]+"<br>");console.log(n)}})}})),l.on("click",(function(e){e.preventDefault(),KTApp.block(o,{overlayColor:"#000000",state:"danger",message:"Please wait..."}),$.ajax({type:"PATCH",url:o.attr("action"),data:o.serialize(),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e,t,n){$(".current_requested_listings").html(e.total),KTApp.unblock(o),s.modal("toggle"),a.reload(),i.reload()},error:function(e){KTApp.unblock(o);var t="";for(var t in e.responseJSON.errors)e.responseJSON.errors.hasOwnProperty(t)&&(t+=e.responseJSON.errors[t]+"<br>");var n={};n.title=String(e.responseJSON.message),n.message=t,$.notify(n,{type:"danger",mouse_over:!0,z_index:1051})}})})),s.on("hide.bs.modal",(function(e){var t=$(this);t.find("#listing_room").val("").trigger("change"),t.find("#listing_supply").val("").trigger("change"),t.find("#listing_comment").val("")})),c.on("click",(function(){location.href="\n        /pdf/supplies?\n        type=".concat(0,"&\n        start=",d,"&\n        end=").concat(u,"&\n        search=").concat($("#requested_supply_listing_datatable_search_query").val(),"&\n        device=").concat($("#requested_supply_listing_datatable_search_device").val(),"\n        ")}))}});jQuery(document).ready((function(){m.init()}))}});